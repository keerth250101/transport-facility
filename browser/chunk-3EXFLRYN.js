import{a as k,b as _,c as I,d as ie,e as G,f as ne,g as oe,h as re,i as le,j as M,k as w,l as N,m as ae,n as se,o as de,p as J}from"./chunk-7FFYEOWF.js";import{$ as te,A as d,C as i,D as n,E as R,F as A,G as c,H as f,I as O,J as r,K as X,L as j,M as Z,N as F,O as E,P as b,Q as T,S as $,T as B,Y as ee,Z as W,_ as H,a as Q,b as U,da as q,fa as K,h as P,i as D,k as z,m as y,n as L,q as h,r as v,v as s,w as g,z as u}from"./chunk-R5TJ67KM.js";var C=(()=>{class t{constructor(){this.rides=[],this.loadFromStorage()}loadFromStorage(){let e=localStorage.getItem("rides");this.rides=e?JSON.parse(e):[]}saveToStorage(){localStorage.setItem("rides",JSON.stringify(this.rides))}getAllRides(){return this.rides}addRide(e){let l=U(Q({},e),{id:Date.now(),bookedEmployees:[]});this.rides.push(l),this.saveToStorage()}bookRide(e,l){let o=Number(e),a=this.rides.find(S=>S.id===o);return a?a.employeeId===l?"You cannot book your own ride":a.bookedEmployees.includes(l)?"You already booked this ride":a.vacantSeats===0?"No seats available":(a.bookedEmployees.push(l),a.vacantSeats--,this.saveToStorage(),"Ride booked successfully"):"Ride not found"}filterRides(e,l){let o=[...this.rides];if(e&&(o=o.filter(a=>a.vehicleType===e)),l){let a=new Date(`1970-01-01T${l}:00`);o=o.filter(S=>{let p=new Date(`1970-01-01T${S.time}:00`);return Math.abs(p.getTime()-a.getTime())/(1e3*60)<=60})}return o}getTimeMatchingRides(){let e=new Date,l=60*60*1e3;return this.rides.filter(o=>{if(!o.time)return!1;let[a,S]=o.time.split(":").map(Number),p=new Date;return p.setHours(a,S,0,0),Math.abs(p.getTime()-e.getTime())<=l})}clearAllRides(){this.rides=[],localStorage.removeItem("rides")}static{this.\u0275fac=function(l){return new(l||t)}}static{this.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var ce=(()=>{class t{constructor(e,l){this.fb=e,this.rideService=l,this.rideForm=this.fb.group({employeeId:["",_.required],vehicleType:["Bike",_.required],vehicleNo:["",_.required],vacantSeats:[1,[_.required,_.min(1)]],time:["",_.required],pickupPoint:["",_.required],destination:["",_.required]})}onSubmit(){this.rideForm.valid&&(this.rideService.addRide(this.rideForm.value),alert("Ride added successfully!"),this.rideForm.reset({vehicleType:"Bike"}))}static{this.\u0275fac=function(l){return new(l||t)(g(ae),g(C))}}static{this.\u0275cmp=y({type:t,selectors:[["app-add-ride"]],decls:54,vars:2,consts:[[1,"ride-container","add-ride"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","employeeId"],[1,"required"],["id","employeeId","formControlName","employeeId","placeholder","Enter Employee ID"],["for","vehicleType"],["id","vehicleType","formControlName","vehicleType"],["value","","disabled",""],["value","Bike"],["value","Car"],["for","vehicleNo"],["id","vehicleNo","formControlName","vehicleNo","placeholder","Enter Vehicle Number"],["for","vacantSeats"],["id","vacantSeats","type","number","formControlName","vacantSeats","placeholder","Enter Vacant Seats"],["for","time"],["id","time","type","time","formControlName","time"],["for","pickupPoint"],["id","pickupPoint","formControlName","pickupPoint","placeholder","Enter Pickup Point"],["for","destination"],["id","destination","formControlName","destination","placeholder","Enter Destination"],["type","submit",1,"btn-primary",3,"disabled"]],template:function(l,o){l&1&&(i(0,"div",0)(1,"h2"),r(2,"Add a Ride"),n(),i(3,"form",1),c("ngSubmit",function(){return o.onSubmit()}),i(4,"div",2)(5,"label",3),r(6,"Employee ID "),i(7,"span",4),r(8,"*"),n()(),R(9,"input",5),n(),i(10,"div",2)(11,"label",6),r(12,"Vehicle Type "),i(13,"span",4),r(14,"*"),n()(),i(15,"select",7)(16,"option",8),r(17,"Select Vehicle Type"),n(),i(18,"option",9),r(19,"Bike"),n(),i(20,"option",10),r(21,"Car"),n()()(),i(22,"div",2)(23,"label",11),r(24,"Vehicle No "),i(25,"span",4),r(26,"*"),n()(),R(27,"input",12),n(),i(28,"div",2)(29,"label",13),r(30,"Vacant Seats "),i(31,"span",4),r(32,"*"),n()(),R(33,"input",14),n(),i(34,"div",2)(35,"label",15),r(36,"Time "),i(37,"span",4),r(38,"*"),n()(),R(39,"input",16),n(),i(40,"div",2)(41,"label",17),r(42,"Pickup Point "),i(43,"span",4),r(44,"*"),n()(),R(45,"input",18),n(),i(46,"div",2)(47,"label",19),r(48,"Destination "),i(49,"span",4),r(50,"*"),n()(),R(51,"input",20),n(),i(52,"button",21),r(53," Add Ride "),n()()()),l&2&&(s(3),d("formGroup",o.rideForm),s(49),d("disabled",o.rideForm.invalid))},dependencies:[ne,w,N,k,oe,M,I,ie,re,le],encapsulation:2})}}return t})();var _e=(t,m)=>({"error-text":t,"success-text":m});function Se(t,m){if(t&1&&(i(0,"option",14),r(1),n()),t&2){let e=m.$implicit;d("value",e.id),s(),F(" ",e.vehicleType," - ",e.pickupPoint," \u2192 ",e.destination," (",e.vacantSeats," seats left) ")}}function ye(t,m){if(t&1&&(i(0,"p",15),r(1),n()),t&2){let e=f();d("ngClass",$(2,_e,e.message.includes("not")||e.message.includes("cannot"),e.message.includes("success"))),s(),j(" ",e.message," ")}}function Ce(t,m){if(t&1&&(i(0,"li")(1,"div",18),r(2),n(),i(3,"div",19),r(4),n()()),t&2){let e=m.$implicit;s(2),F(" ",e.vehicleType," - ",e.pickupPoint," \u2192 ",e.destination," (",e.vacantSeats," seats) "),s(2),X(e.time)}}function Re(t,m){if(t&1&&(i(0,"ul",16),u(1,Ce,5,5,"li",17),n()),t&2){let e=f();s(),d("ngForOf",e.rides)}}function xe(t,m){t&1&&(i(0,"p",20),r(1,"No rides available."),n())}var pe=(()=>{class t{constructor(e){this.rideService=e,this.employeeId="",this.message="",this.rides=[],this.rides=this.rideService.getTimeMatchingRides()}onBookRide(){if(!this.employeeId||!this.selectedRideId){this.message="Please select a ride and enter Employee ID.";return}this.message=this.rideService.bookRide(this.selectedRideId,this.employeeId)}static{this.\u0275fac=function(l){return new(l||t)(g(C))}}static{this.\u0275cmp=y({type:t,selectors:[["app-pick-ride"]],decls:26,vars:7,consts:[["noRides",""],[1,"ride-container"],[1,"form-group"],["for","employeeId"],[1,"required"],["id","employeeId","type","text","placeholder","Enter your Employee ID",3,"ngModelChange","ngModel"],["for","rideSelect"],["id","rideSelect",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],[1,"btn-primary",3,"click"],[3,"ngClass",4,"ngIf"],[2,"margin-top","2rem","color","#003a9e"],["class","ride-list",4,"ngIf","ngIfElse"],[3,"value"],[3,"ngClass"],[1,"ride-list"],[4,"ngFor","ngForOf"],[1,"details"],[1,"seats"],[1,"no-rides"]],template:function(l,o){if(l&1){let a=A();i(0,"div",1)(1,"h2"),r(2,"Pick a Ride"),n(),i(3,"div",2)(4,"label",3),r(5,"Employee ID "),i(6,"span",4),r(7,"*"),n()(),i(8,"input",5),T("ngModelChange",function(p){return h(a),b(o.employeeId,p)||(o.employeeId=p),v(p)}),n()(),i(9,"div",2)(10,"label",6),r(11,"Select Ride "),i(12,"span",4),r(13,"*"),n()(),i(14,"select",7),T("ngModelChange",function(p){return h(a),b(o.selectedRideId,p)||(o.selectedRideId=p),v(p)}),i(15,"option",8),r(16,"-- Choose a Ride --"),n(),u(17,Se,2,5,"option",9),n()(),i(18,"button",10),c("click",function(){return h(a),v(o.onBookRide())}),r(19,"Book Ride"),n(),u(20,ye,2,5,"p",11),i(21,"h3",12),r(22,"Available Rides"),n(),u(23,Re,2,1,"ul",13)(24,xe,2,0,"ng-template",null,0,B),n()}if(l&2){let a=O(25);s(8),E("ngModel",o.employeeId),s(6),E("ngModel",o.selectedRideId),s(),d("ngValue",null),s(2),d("ngForOf",o.rides),s(3),d("ngIf",o.message),s(3),d("ngIf",o.rides.length>0)("ngIfElse",a)}},dependencies:[ee,W,H,w,N,k,M,I,G],encapsulation:2})}}return t})();function Ee(t,m){if(t&1){let e=A();i(0,"div",6)(1,"button",7),c("click",function(){h(e);let o=f();return v(o.onClearRides())}),r(2," Clear All Rides "),n()()}}function be(t,m){if(t&1){let e=A();i(0,"div",8)(1,"div")(2,"label"),r(3,"Vehicle Type:"),n(),i(4,"select",9),T("ngModelChange",function(o){h(e);let a=f();return b(a.vehicleType,o)||(a.vehicleType=o),v(o)}),c("change",function(){h(e);let o=f();return v(o.refresh())}),i(5,"option",10),r(6,"All"),n(),i(7,"option"),r(8,"Bike"),n(),i(9,"option"),r(10,"Car"),n()()(),i(11,"div")(12,"label"),r(13,"Time:"),n(),i(14,"input",11),T("ngModelChange",function(o){h(e);let a=f();return b(a.time,o)||(a.time=o),v(o)}),c("change",function(){h(e);let o=f();return v(o.refresh())}),n()()()}if(t&2){let e=f();s(4),E("ngModel",e.vehicleType),s(10),E("ngModel",e.time)}}function Te(t,m){if(t&1&&(i(0,"li")(1,"span",12),r(2),n(),i(3,"span",13),r(4),n()()),t&2){let e=m.$implicit;s(2),Z("",e.vehicleType," - ",e.pickupPoint," to ",e.destination,""),s(2),j("",e.vacantSeats," seats")}}function ke(t,m){t&1&&(i(0,"p",14),r(1,"No rides available."),n())}var ue=(()=>{class t{constructor(e){this.rideService=e,this.vehicleType="",this.time="",this.rides=[]}ngOnInit(){this.refresh()}refresh(){let e=this.rideService.filterRides(this.vehicleType,this.time);if(!this.time){let l=this.rideService.getTimeMatchingRides();this.vehicleType?e=l.filter(o=>o.vehicleType===this.vehicleType):e=l}this.rides=e}onClearRides(){confirm("Are you sure you want to clear all rides?")&&(this.rideService.clearAllRides(),this.refresh())}static{this.\u0275fac=function(l){return new(l||t)(g(C))}}static{this.\u0275cmp=y({type:t,selectors:[["app-ride-list"]],decls:9,vars:4,consts:[["noRides",""],[1,"ride-container"],["style","margin-bottom:16px;","class","actions",4,"ngIf"],["class","filters",4,"ngIf","ngIfElse"],[1,"ride-list"],[4,"ngFor","ngForOf"],[1,"actions",2,"margin-bottom","16px"],[1,"btn-outline",3,"click"],[1,"filters"],[3,"ngModelChange","change","ngModel"],["value",""],["type","time",3,"ngModelChange","change","ngModel"],[1,"details"],[1,"seats"],[1,"no-rides"]],template:function(l,o){if(l&1&&(i(0,"div",1)(1,"h2"),r(2,"Available Rides"),n(),u(3,Ee,3,0,"div",2)(4,be,15,2,"div",3),i(5,"ul",4),u(6,Te,5,4,"li",5),n(),u(7,ke,2,0,"ng-template",null,0,B),n()),l&2){let a=O(8);s(3),d("ngIf",o.rides.length>0),s(),d("ngIf",o.rides.length>0)("ngIfElse",a),s(2),d("ngForOf",o.rides)}},dependencies:[W,H,w,N,k,M,I,G],encapsulation:2})}}return t})();function we(t,m){if(t&1&&(i(0,"li"),r(1),n()),t&2){let e=m.$implicit;s(),F(" ",e.vehicleType," - ",e.pickupPoint," \u2192 ",e.destination," (",e.vacantSeats," seats) ")}}function Ne(t,m){if(t&1&&(i(0,"section",9)(1,"h3"),r(2,"Today's Available Rides"),n(),i(3,"ul"),u(4,we,2,4,"li",10),n()()),t&2){let e=f();s(4),d("ngForOf",e.rideService.getAllRides())}}function Ae(t,m){t&1&&(i(0,"p",11),r(1," No rides available yet. "),n())}var fe=(()=>{class t{constructor(e,l,o){this.router=e,this.rideService=l,this.authService=o}navigateToAddRide(){this.router.navigate(["/rides/add"])}navigateToPickRide(){this.router.navigate(["/rides/pick"])}navigateToRideList(){this.router.navigate(["/rides/list"])}logout(){this.authService.logout()}static{this.\u0275fac=function(l){return new(l||t)(g(q),g(C),g(J))}}static{this.\u0275cmp=y({type:t,selectors:[["app-home"]],decls:15,vars:2,consts:[[1,"home-container"],[1,"home-header"],[1,"btn-logout",3,"click"],[1,"home-buttons"],[1,"btn-primary",3,"click"],[1,"btn-accent",3,"click"],[1,"btn-outline",3,"click"],["class","ride-summary",4,"ngIf"],["class","no-rides",4,"ngIf"],[1,"ride-summary"],[4,"ngFor","ngForOf"],[1,"no-rides"]],template:function(l,o){l&1&&(i(0,"div",0)(1,"header",1)(2,"h2"),r(3,"Welcome to Transport Facility"),n(),i(4,"button",2),c("click",function(){return o.logout()}),r(5,"Logout"),n()(),i(6,"section",3)(7,"button",4),c("click",function(){return o.navigateToAddRide()}),r(8,"Add Ride"),n(),i(9,"button",5),c("click",function(){return o.navigateToPickRide()}),r(10,"Pick Ride"),n(),i(11,"button",6),c("click",function(){return o.navigateToRideList()}),r(12," Available Rides "),n()(),u(13,Ne,5,1,"section",7)(14,Ae,2,0,"p",8),n()),l&2&&(s(13),d("ngIf",o.rideService.getAllRides().length>0),s(),d("ngIf",o.rideService.getAllRides().length===0))},encapsulation:2})}}return t})();var V=(()=>{class t{constructor(e,l){this.authService=e,this.router=l}canActivate(){return this.authService.isAuthenticated()?!0:(this.router.navigate(["/login"]),!1)}static{this.\u0275fac=function(l){return new(l||t)(z(J),z(q))}}static{this.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Fe=[{path:"",component:fe,canActivate:[V]},{path:"add",component:ce,canActivate:[V]},{path:"pick",component:pe,canActivate:[V]},{path:"list",component:ue,canActivate:[V]}],ge=(()=>{class t{static{this.\u0275fac=function(l){return new(l||t)}}static{this.\u0275mod=L({type:t})}static{this.\u0275inj=D({imports:[K.forChild(Fe),K]})}}return t})();var nt=(()=>{class t{static{this.\u0275fac=function(l){return new(l||t)}}static{this.\u0275mod=L({type:t})}static{this.\u0275inj=D({imports:[te,se,de,ge]})}}return t})();export{nt as RidesModule};
